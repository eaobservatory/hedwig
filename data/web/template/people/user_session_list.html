{% extends 'layout.html' %}
{% set navigation=['site_admin'] %}
{% set help_link=url_for('help.admin_page', page_name='user') %}

{% block content %}
{% if sessions %}
    <table>
        <tr>
            <th>User</th>
            <th>Expiry</th>
            <th>Remote address</th>
            <th>Remote agent</th>
            <th>Actions</th>
        </tr>
        {% for session in sessions.values() %}
            <tr>
                <td>
                    {% if session.person_id is none %}
                        <a href="{{ url_for('.user_log', user_id=session.user_id) }}">{{ session.user_name }}</a>
                        <span class="label">unregistered</span>
                    {% else %}
                        <a href="{{ url_for('.person_view', person_id=session.person_id) }}">{{ session.person_name }}</a>
                    {% endif %}
                </td>
                <td>{{ session.expiry | format_datetime }}</td>
                <td>{{ session.remote_addr }}</td>
                <td>
                    {% if session.remote_agent is none %}
                        &nbsp;
                    {% else %}
                        {{ session.remote_agent }}
                    {% endif %}
                </td>
                <td><a href="{{ url_for('.user_session_log_out', auth_token_id=session.id) }}">Log out</a></td>
            </tr>
        {% endfor %}
    </table>

    <nav>
        <p>
            <a href="{{ url_for('.user_session_log_out_all') }}">Log out all</a></td>
        </p>
    </nav>
{% else %}
    <p class="not_present">
        No log in sessions are present.
    </p>
{% endif %}
{% endblock %}
