{% extends "layout.html" %}
{% set navigation=['facility_admin', ('Semesters', url_for('.semester_list'))] %}
{% set help_link=url_for('help.admin_page', page_name='semester') %}

{% from 'macro/text.html' import render_format_control %}

{% block content %}

{% if message is not none %}
    <p class="warning">
        {{ message }}
    </p>
{% endif %}


<form method="POST" action="{{ target }}">
    <ol>
        <li class="separator">Semester information</li>
        <li>
            <label for="semester_name">Name</label>
            <input type="text" name="semester_name" value="{{ semester.name }}" required="required" autofocus="autofocus" />
            <span class="explanation">for display on this system</span>
        </li>
        <li>
            <label for="semester_code">Code</label>
            <input type="text" name="semester_code" value="{{ semester.code }}" required="required" />
            <span class="explanation">as part of a project code</span>
        </li>
        <li>
            <label for="start_date">Start date</label>
            <input type="date" name="start_date" value="{{ semester.date_start.date }}" placeholder="YYYY-MM-DD" required="required" size="10" />
            <input type="time" name="start_time" value="{{ semester.date_start.time }}" placeholder="HH:MM" required="required" size="5" />
            <span class="explanation">UT, start of observing</span>
        </li>
        <li>
            <label for="end_date">End date</label>
            <input type="date" name="end_date" value="{{ semester.date_end.date }}" placeholder="YYYY-MM-DD" required="requried" size="10" />
            <input type="time" name="end_time" value="{{ semester.date_end.time }}" placeholder="HH:MM" required="required" size="5" />
            <span class="explanation">UT, end of observing</span>
        </li>
        {% if semester_copy is not none %}
            <li class="separator">Call preamble</li>
            <li>
                <div class="explanation">
                    Please select any call preambles you would like
                    to copy from Semester {{ semester_copy.name }}.
                </div>
                <input type="hidden" name="semester_copy_id" value="{{ semester_copy.id }}" />
            </li>
            {% for (type_num, type_name) in facility_call_type_class.get_options().items() %}
                <li>
                    <label for="copy_preamble_{{ type_num }}">{% if loop.first %}Copy preamble{% else %}&nbsp;{% endif %}</label>
                    <input type="checkbox" name="copy_preamble_{{ type_num }}" {{ 'checked="checked"' | safe if copy_preambles.get(type_num, False) }} {{ 'disabled="disabled"' | safe if not semester_copy_preambles.has_type(type_num) }} />
                    <span class="checkboxlabel">{{ type_name }}</span>
                </li>
            {% endfor %}
        {% endif %}
        <li class="separator">Description</li>
        <li>
            <label for="description">Description</label>
            <textarea name="description" cols="70" rows="10">{{ semester.description }}</textarea>
        </li>
        <li>
            <label for="description_format">Description format</label>
            {{ render_format_control('description_format', semester.description_format, format_types) }}
        </li>
        <li>
            <input type="submit" value="Save" name="submit" />
        </li>
    </ol>
</form>

{% endblock %}
